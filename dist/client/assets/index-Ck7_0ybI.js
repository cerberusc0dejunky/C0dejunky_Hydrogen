import{r as l,b as ne,d as oe,h as Le,L as ue,G as Je,f as Ke,H as Ye}from"./chunk-TMI4QPZX-voV0X6j3.js";import{j as P}from"./jsx-runtime-59Xd5K8P.js";const Qe="modulepreload",Xe=function(e){return"/"+e},le={},ze=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let a=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=a(r.map(u=>{if(u=Xe(u),u in le)return;le[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Qe,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return o.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function j(e){if(!e){const t=`flattenConnection(): needs a 'connection' to flatten, but received '${e??""}' instead.`;return console.error(t+" Returning an empty array"),[]}return"nodes"in e?e.nodes:"edges"in e&&Array.isArray(e.edges)?e.edges.map(t=>{if(!(t!=null&&t.node))throw new Error("flattenConnection(): Connection edges must contain nodes");return t.node}):[]}const de="_shopify_y",fe="_shopify_s",Ze="X-Shopify-VisitToken",et="X-Shopify-UniqueToken",ee={current:null};function V(){var e,t,r;let n;if(typeof window<"u"&&typeof window.performance<"u")try{const o=/^https?:\/\/([^/]+)(\/api\/(?:unstable|2\d{3}-\d{2})\/graphql\.json(?=$|\?))?/,i=performance.getEntriesByType("resource");let a;for(let s=i.length-1;s>=0;s--){const c=i[s];if(c.initiatorType!=="fetch")continue;const u=window.location.host,d=c.name.match(o);if(!d)continue;const[,f,p]=d;if(f===u||p&&(f==null?void 0:f.endsWith(`.${u}`))){const y=pe(c);if(y){a=y;break}}}if(a&&(n=a),n?ee.current=n:ee.current&&(n=ee.current),!n){const s=performance.getEntriesByType("navigation")[0];n=pe(s,!1)}}catch{}if(!n){const o=typeof arguments[0]=="string"?arguments[0]:typeof document<"u"?document.cookie:"";n={uniqueToken:((e=o.match(/\b_shopify_y=([^;]+)/))==null?void 0:e[1])||"",visitToken:((t=o.match(/\b_shopify_s=([^;]+)/))==null?void 0:t[1])||"",consent:((r=o.match(/\b_tracking_consent=([^;]+)/))==null?void 0:r[1])||""}}return n}function pe(e,t=!0){let r="",n="",o="";const i=e.serverTiming;if(i&&i.length>=3)for(let a=i.length-1;a>=0;a--){const{name:s,description:c}=i[a];if(!(!s||!c)&&(s==="_y"?r=c:s==="_s"?n=c:s==="_cmp"&&(o=c),r&&n&&o))break}return r&&n&&(!t||o)?{uniqueToken:r,visitToken:n,consent:o}:void 0}const I={PAGE_VIEW:"PAGE_VIEW",ADD_TO_CART:"ADD_TO_CART",PAGE_VIEW_2:"PAGE_VIEW_2",COLLECTION_VIEW:"COLLECTION_VIEW",PRODUCT_VIEW:"PRODUCT_VIEW",SEARCH_VIEW:"SEARCH_VIEW"},U={collection:"collection",product:"product",search:"search"},tt={headless:"headless"},he={hydrogen:"6167201",headless:"12875497473"};function D(e,t){return{schema_id:e,payload:t,metadata:{event_created_at_ms:Date.now()}}}function T(e){const t={id:"",resource:null,resourceId:null,search:"",searchParams:new URLSearchParams,hash:""};if(typeof e!="string")return t;try{const{search:r,searchParams:n,pathname:o,hash:i}=new URL(e),a=o.split("/"),s=a[a.length-1],c=a[a.length-2];return!s||!c?t:{id:`${s}${r}${i}`||"",resource:c??null,resourceId:s||null,search:r,searchParams:n,hash:i}}catch{return t}}function A(e,t){return typeof e!="object"?{}:(Object.entries(e).forEach(([r,n])=>{n&&(t[r]=n)}),t)}function rt(e){return typeof document>"u"?(console.error(`${e} should only be used within the useEffect callback or event handlers`),!0):!1}const ye="xxxx-4xxx-xxxx-xxxxxxxxxxxx";function Q(){let e="";try{const t=window.crypto,r=new Uint16Array(31);t.getRandomValues(r);let n=0;e=ye.replace(/[x]/g,o=>{const i=r[n]%16,a=o==="x"?i:i&3|8;return n++,a.toString(16)}).toUpperCase()}catch{e=ye.replace(/[x]/g,r=>{const n=Math.random()*16|0;return(r==="x"?n:n&3|8).toString(16)}).toUpperCase()}return`${nt()}-${e}`}function nt(){let e=0,t=0;e=new Date().getTime()>>>0;try{t=performance.now()>>>0}catch{t=0}return Math.abs(e+t).toString(16).toLowerCase().padStart(8,"0")}const ot="trekkie_storefront_page_view/1.4",at="myshopify.dev";function me(e){const t=e,{id:r,resource:n}=T(t.resourceId),o=n?n.toLowerCase():void 0;return[D(ot,A({pageType:t.pageType,customerId:parseInt(T(t.customerId).id||"0"),resourceType:o,resourceId:parseInt(r)},it(t)))]}function it(e){return{appClientId:e.shopifySalesChannel?he[e.shopifySalesChannel]:he.headless,isMerchantRequest:st(e.url),hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",isPersistentCookie:e.hasUserConsent,uniqToken:e.uniqueToken,visitToken:e.visitToken,microSessionId:Q(),microSessionCount:1,url:e.url,path:e.path,search:e.search,referrer:e.referrer,title:e.title,shopId:parseInt(T(e.shopId).id),currency:e.currency,contentLanguage:e.acceptedLanguage||"en"}}function st(e){if(typeof e!="string")return!1;const t=new URL(e).hostname;return t.indexOf(at)!==-1||t==="localhost"}const ct="2025.7.1",O="custom_storefront_customer_tracking/1.2",xe="page_rendered",Ne="collection_page_rendered",Ve="product_page_rendered",ut="product_added_to_cart",Ue="search_submitted";function M(e){return{canonical_url:e.canonicalUrl||e.url,customer_id:parseInt(T(e.customerId).id||"0")}}function lt(e){const t=e,r=M(t),n=t.pageType,o=[];switch(o.push(D(O,A({event_name:xe,...r},R(t)))),n){case U.collection:o.push(D(O,A({event_name:Ne,...r,collection_name:t.collectionHandle,collection_id:parseInt(T(t.collectionId).id)},R(t))));break;case U.product:o.push(D(O,A({event_name:Ve,...r,products:ae(t.products),total_value:t.totalValue},R(t))));break;case U.search:o.push(D(O,A({event_name:Ue,...r,search_string:t.searchString},R(t))));break}return o}function dt(e){const t=e,r=M(t);return[D(O,A({event_name:xe,...r},R(t)))]}function ft(e){const t=e,r=M(t);return[D(O,A({event_name:Ne,...r,collection_name:t.collectionHandle,collection_id:parseInt(T(t.collectionId).id)},R(t)))]}function pt(e){const t=e,r=M(t);return[D(O,A({event_name:Ve,...r,products:ae(t.products),total_value:t.totalValue},R(t)))]}function ht(e){const t=e,r=M(t);return[D(O,A({event_name:Ue,...r,search_string:t.searchString},R(t)))]}function yt(e){const t=e,r=T(t.cartId);return[D(O,A({event_name:ut,customerId:t.customerId,cart_token:r!=null&&r.id?`${r.id}`:null,total_value:t.totalValue,products:ae(t.products),customer_id:parseInt(T(t.customerId).id||"0")},R(t)))]}function R(e){const t=e;return{source:e.shopifySalesChannel||tt.headless,asset_version_id:e.assetVersionId||ct,hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",is_persistent_cookie:e.hasUserConsent,deprecated_visit_token:e.visitToken,unique_token:e.uniqueToken,event_time:Date.now(),event_id:Q(),event_source_url:e.url,referrer:e.referrer,user_agent:e.userAgent,navigation_type:e.navigationType,navigation_api:e.navigationApi,shop_id:parseInt(T(e.shopId).id),currency:e.currency,ccpa_enforced:t.ccpaEnforced||!1,gdpr_enforced:t.gdprEnforced||!1,gdpr_enforced_as_string:t.gdprEnforced?"true":"false",analytics_allowed:e.analyticsAllowed||!1,marketing_allowed:e.marketingAllowed||!1,sale_of_data_allowed:e.saleOfDataAllowed||!1}}function ae(e){return e?e.map(t=>{const r=A({variant_gid:t.variantGid,category:t.category,sku:t.sku,product_id:parseInt(T(t.productGid).id),variant_id:parseInt(T(t.variantGid).id)},{product_gid:t.productGid,name:t.name,variant:t.variantName||"",brand:t.brand,price:parseFloat(t.price),quantity:Number(t.quantity||0)});return JSON.stringify(r)}):[]}function W(e,t){const{eventName:r,payload:n}=e;if(!n.hasUserConsent)return Promise.resolve();let o=[];const i=n;return r===I.PAGE_VIEW?o=o.concat(me(i),lt(i)):r===I.ADD_TO_CART?o=o.concat(yt(n)):r===I.PAGE_VIEW_2?o=o.concat(me(i),dt(i)):r===I.COLLECTION_VIEW?o=o.concat(ft(i)):r===I.PRODUCT_VIEW?o=o.concat(pt(i)):r===I.SEARCH_VIEW&&(o=o.concat(ht(i))),o.length?gt(o,t):Promise.resolve()}function mt(){return typeof window>"u"||!window.navigator?!1:/Chrome-Lighthouse/.test(window.navigator.userAgent)}const ge="sendShopifyAnalytics request is unsuccessful";function gt(e,t){if(mt())return Promise.resolve();const r={events:e,metadata:{event_sent_at_ms:Date.now()}};try{return fetch(t?`https://${t}/.well-known/shopify/monorail/unstable/produce_batch`:"https://monorail-edge.shopifysvc.com/unstable/produce_batch",{method:"post",headers:{"content-type":"text/plain"},body:JSON.stringify(r)}).then(n=>{if(!n.ok)throw new Error("Response failed");return n.text()}).then(n=>{n&&JSON.parse(n).result.forEach(i=>{i.status!==200&&console.error(ge,`

`,i.message)})}).catch(n=>{console.error(ge,n)})}catch{return Promise.resolve()}}function vt(){if(rt("getClientBrowserParameters"))return{uniqueToken:"",visitToken:"",url:"",path:"",search:"",referrer:"",title:"",userAgent:"",navigationType:"",navigationApi:""};const[e,t]=Et(),r=V();return{uniqueToken:r.uniqueToken,visitToken:r.visitToken,url:location.href,path:location.pathname,search:location.search,referrer:document.referrer,title:document.title,userAgent:navigator.userAgent,navigationType:e,navigationApi:t}}function _t(){try{const e=(performance==null?void 0:performance.getEntriesByType)&&(performance==null?void 0:performance.getEntriesByType("navigation"));if(e&&e[0]){const t=window.performance.getEntriesByType("navigation")[0].type;return t&&t.toString()}}catch{}}function wt(){var e,t;try{if(PerformanceNavigation&&((e=performance==null?void 0:performance.navigation)==null?void 0:e.type)!==null&&((t=performance==null?void 0:performance.navigation)==null?void 0:t.type)!==void 0){const r=performance.navigation.type;switch(r){case PerformanceNavigation.TYPE_NAVIGATE:return"navigate";case PerformanceNavigation.TYPE_RELOAD:return"reload";case PerformanceNavigation.TYPE_BACK_FORWARD:return"back_forward";default:return`unknown: ${r}`}}}catch{}}function Et(){try{let e="PerformanceNavigationTiming",t=_t();return t||(t=wt(),e="performance.navigation"),t?[t,e]:["unknown","unknown"]}catch{}return["error","error"]}const ve={};function Pt(e,t){const r=ve[e];if(r)return r;const n=new Promise((o,i)=>{const a=document.createElement("script");t!=null&&t.module?a.type="module":a.type="text/javascript",a.src=e,a.onload=()=>{o(!0)},a.onerror=()=>{i(!1)},(t==null?void 0:t.in)==="head"?document.head.appendChild(a):document.body.appendChild(a);const s=t==null?void 0:t.attributes;s&&Object.keys(s).forEach(c=>{a.setAttribute(c,s[c])})});return ve[e]=n,n}function ie(e,t){const[r,n]=l.useState("loading");return l.useEffect(()=>{Pt(e,t).then(()=>n("done")).catch(()=>n("error"))},[e]),r}function Ct(e,t,r={}){let n=e+"="+encodeURIComponent(t);return r.expires&&(n+="; Expires="+new Date(r.expires).toUTCString()),r.maxage!=null&&r.maxage>=0&&(n+="; Max-Age="+(r.maxage|0)),r.domain&&(n+="; Domain="+r.domain),r.path&&(n+="; Path="+r.path),r.samesite&&(n+="; SameSite="+r.samesite),(r.secure||r.samesite==="None")&&(n+="; Secure"),r.httponly&&(n+="; HttpOnly"),n}const Tt=60*60*24*360*1,It=60*30;function qe(e){const{hasUserConsent:t,domain:r="",checkoutDomain:n="",storefrontAccessToken:o,fetchTrackingValues:i,ignoreDeprecatedCookies:a=!1}=e||{},s=At({storefrontAccessToken:o,fetchTrackingValues:i,checkoutDomain:n});return l.useEffect(()=>{if(a||!s)return;let c=r||window.location.host;if(n){const d=n.split(".").reverse(),f=c.split(".").reverse(),p=[];d.forEach((g,y)=>{g===f[y]&&p.push(g)}),c=p.reverse().join(".")}/^localhost/.test(c)&&(c="");const u=c?/^\./.test(c)?c:`.${c}`:"";if(t){const d=V();if((d.uniqueToken||d.visitToken||"").startsWith("00000000-"))return;G(de,d.uniqueToken||Q(),Tt,u),G(fe,d.visitToken||Q(),It,u)}else G(de,"",0,u),G(fe,"",0,u)},[s,t,r,n,a]),s}function G(e,t,r,n){document.cookie=Ct(e,t,{maxage:r,domain:n,samesite:"Lax",path:"/"})}async function _e(e,t=""){const{uniqueToken:r,visitToken:n}=V(),o=await fetch(`${t.replace(/\/+$/,"")}/api/unstable/graphql.json`,{method:"POST",headers:{"Content-Type":"application/json",...e&&{"X-Shopify-Storefront-Access-Token":e},...n||r?{[Ze]:n,[et]:r}:void 0},body:JSON.stringify({query:"query ensureCookies { consentManagement { cookies(visitorConsent:{}) { cookieDomain } } }"})});if(!o.ok)throw new Error(`Failed to fetch consent from browser: ${o.status} ${o.statusText}`);await o.json(),V()}function At({checkoutDomain:e,storefrontAccessToken:t,fetchTrackingValues:r=!1}){const[n,o]=l.useState(!r),i=l.useRef(!1);return l.useEffect(()=>{if(!r){o(!0);return}i.current||(i.current=!0,_e(t).catch(a=>e?_e(t,e):Promise.reject(a)).catch(a=>{console.warn("[h2:warn:useShopifyCookies] Failed to fetch tracking values from browser: "+(a instanceof Error?a.message:String(a)))}).finally(()=>{o(!0)}))},[e,r,t]),n}function z(e){let{type:t,data:r={},customData:n}=e,o=oe(),{publish:i,cart:a,prevCart:s,shop:c,customData:u}=Z(),d=o.pathname+o.search,f={...r,customData:{...u,...n},cart:a,prevCart:s,shop:c};return l.useEffect(()=>{c!=null&&c.shopId&&(f={...f,url:window.location.href},i(t,f))},[i,d,c==null?void 0:c.shopId]),null}function kt(e){return P.jsx(z,{...e,type:"page_viewed"})}function St(e){return P.jsx(z,{...e,type:"product_viewed"})}function bt(e){return P.jsx(z,{...e,type:"collection_viewed"})}function Dt(e){return P.jsx(z,{...e,type:"search_viewed"})}var b={PAGE_VIEWED:"page_viewed",PRODUCT_VIEWED:"product_viewed",COLLECTION_VIEWED:"collection_viewed",CART_VIEWED:"cart_viewed",SEARCH_VIEWED:"search_viewed",PRODUCT_ADD_TO_CART:"product_added_to_cart"},Ot="_sfapi_proxy",Rt="_server_tracking";function $e(e){var t,r;if(typeof window>"u")return!1;try{return!!((r=(t=window.performance.getEntriesByType("navigation")[0])==null?void 0:t.serverTiming)!=null&&r.some(n=>n.name===e))}catch{return!1}}function Lt(){return $e(Ot)}function xt(){return $e(Rt)}var Nt="https://cdn.shopify.com/shopifycloud/consent-tracking-api/v0.2/consent-tracking-api.js",Vt="https://cdn.shopify.com/shopifycloud/privacy-banner/storefront-banner.js";function te(e){console.error(`[h2:error:useCustomerPrivacy] Unable to setup Customer Privacy API: Missing consent.${e} configuration.`)}function Ut(e){let{withPrivacyBanner:t=!1,onVisitorConsentCollected:r,onReady:n,checkoutDomain:o,storefrontAccessToken:i,country:a,locale:s,sameDomainForStorefrontApi:c}=e,u=l.useMemo(()=>c??Lt(),[c]),d=l.useMemo(()=>u&&!xt(),[u]),f=qe({fetchTrackingValues:d,storefrontAccessToken:i,ignoreDeprecatedCookies:!0}),p=l.useMemo(V,[f]),{revalidate:g}=Ye();ie(t?Vt:Nt,{attributes:{id:"customer-privacy-api"}});let{observing:y,setLoaded:h,apisLoaded:m}=$t({withPrivacyBanner:t}),v=l.useMemo(()=>{o||te("checkoutDomain"),i||te("storefrontAccessToken"),(i.startsWith("shpat_")||i.length!==32)&&console.error("[h2:error:useCustomerPrivacy] It looks like you passed a private access token, make sure to use the public token");let w=jt(o);return{checkoutRootDomain:u&&typeof window<"u"?window.location.host:o,storefrontRootDomain:w?"."+w:void 0,storefrontAccessToken:i,country:a,locale:s}},[te,o,i,a,s]);l.useEffect(()=>{let w=_=>{let k=V();if((p.visitToken!==k.visitToken||p.uniqueToken!==k.uniqueToken)&&g().catch(()=>{console.warn("[h2:warn:useCustomerPrivacy] Revalidation failed after consent change.")}),r){let C=q();if(C!=null&&C.shouldShowBanner()){let S=C.currentVisitorConsent();if(S&&S.marketing===""&&S.analytics===""&&S.preferences==="")return}r(_.detail)}};return document.addEventListener("visitorConsentCollected",w),()=>{document.removeEventListener("visitorConsentCollected",w)}},[r]),l.useEffect(()=>{if(!t||y.current.privacyBanner)return;y.current.privacyBanner=!0;let w=window.privacyBanner||void 0;Object.defineProperty(window,"privacyBanner",{configurable:!0,get(){return w},set(_){typeof _=="object"&&_!==null&&"showPreferences"in _&&"loadBanner"in _&&(w=Pe({privacyBanner:_,config:v}),h.privacyBanner())}})},[t,v,Pe,h.privacyBanner]),l.useEffect(()=>{if(y.current.customerPrivacy)return;y.current.customerPrivacy=!0;let w=null,_=window.Shopify||void 0;Object.defineProperty(window,"Shopify",{configurable:!0,get(){return _},set(k){typeof k=="object"&&k!==null&&Object.keys(k).length===0&&(_=k,Object.defineProperty(window.Shopify,"customerPrivacy",{configurable:!0,get(){return w},set(C){if(typeof C=="object"&&C!==null&&"setTrackingConsent"in C){let S=C;w={...S,setTrackingConsent:Ee({customerPrivacy:S,config:v})},_={..._,customerPrivacy:w},h.customerPrivacy()}}}))}})},[v,Ee,h.customerPrivacy]),l.useEffect(()=>{if(!m||!f)return;let w=q();if(w&&!w.cachedConsent){let _=V();_.consent&&(w.cachedConsent=_.consent)}if(t){let _=X();_&&_.loadBanner(v)}qt(),n==null||n()},[m,f]);let E={customerPrivacy:q()};return t&&(E.privacyBanner=X()),E}var we=!1;function qt(){if(we)return;we=!0;let e=new CustomEvent("shopifyCustomerPrivacyApiLoaded");document.dispatchEvent(e)}function $t({withPrivacyBanner:e}){let t=l.useRef({customerPrivacy:!1,privacyBanner:!1}),[r,n]=l.useState(e?[!1,!1]:[!1]),o=r.every(Boolean);return{observing:t,setLoaded:{customerPrivacy:()=>{n(e?i=>[!0,i[1]]:()=>[!0])},privacyBanner:()=>{e&&n(i=>[i[0],!0])}},apisLoaded:o}}function jt(e){if(typeof window>"u")return;let t=window.location.host,r=e.split(".").reverse(),n=t.split(".").reverse(),o=[];return r.forEach((i,a)=>{i===n[a]&&o.push(i)}),o.reverse().join(".")||void 0}function Ee({customerPrivacy:e,config:t}){let r=e.setTrackingConsent,{locale:n,country:o,...i}=t;function a(s,c){r({...i,headlessStorefront:!0,...s},c)}return a}function Pe({privacyBanner:e,config:t}){let r=e.loadBanner,n=e.showPreferences;function o(a){if(typeof a=="object"){r({...t,...a});return}r(t)}function i(a){if(typeof a=="object"){n({...t,...a});return}n(t)}return{loadBanner:o,showPreferences:i}}function q(){var e;try{return window.Shopify&&window.Shopify.customerPrivacy?(e=window.Shopify)==null?void 0:e.customerPrivacy:null}catch{return null}}function X(){try{return window&&(window!=null&&window.privacyBanner)?window.privacyBanner:null}catch{return null}}var Bt="2025.7.2";function Mt(){let e=q();if(!e)throw new Error("Shopify Customer Privacy API not available. Must be used within a useEffect. Make sure to load the Shopify Customer Privacy API with useCustomerPrivacy() or <AnalyticsProvider>.");return e}function Wt({consent:e,onReady:t,domain:r}){let{subscribe:n,register:o,canTrack:i}=Z(),[a,s]=l.useState(!1),[c,u]=l.useState(!1),[d,f]=l.useState(""),p=l.useRef(!1),{checkoutDomain:g,storefrontAccessToken:y,language:h}=e,{ready:m}=o("Internal_Shopify_Analytics");Ut({...e,locale:h,checkoutDomain:g||"mock.shop",storefrontAccessToken:y||"abcdefghijklmnopqrstuvwxyz123456",onReady:()=>!e.withPrivacyBanner&&u(!0),onVisitorConsentCollected:E=>{try{f(JSON.stringify(E))}catch{}u(!0)}});let v=l.useMemo(()=>c?i():!0,[c,i,d]);return qe({hasUserConsent:v,domain:r,checkoutDomain:g,fetchTrackingValues:!1,ignoreDeprecatedCookies:!c}),l.useEffect(()=>{p.current||(p.current=!0,n(b.PAGE_VIEWED,Gt),n(b.PRODUCT_VIEWED,Ft),n(b.COLLECTION_VIEWED,Jt),n(b.SEARCH_VIEWED,Kt),n(b.PRODUCT_ADD_TO_CART,Yt),s(!0))},[n]),l.useEffect(()=>{a&&c&&(m(),t())},[a,c,t]),null}function F(e){console.error(`[h2:error:ShopifyAnalytics] Unable to send Shopify analytics: Missing shop.${e} configuration.`)}function H(e){var n,o,i,a;let t=Mt(),r=t.analyticsProcessingAllowed();if(!((n=e==null?void 0:e.shop)!=null&&n.shopId)){F("shopId");return}if(!((o=e==null?void 0:e.shop)!=null&&o.acceptedLanguage)){F("acceptedLanguage");return}if(!((i=e==null?void 0:e.shop)!=null&&i.currency)){F("currency");return}if(!((a=e==null?void 0:e.shop)!=null&&a.hydrogenSubchannelId)){F("hydrogenSubchannelId");return}return{shopifySalesChannel:"hydrogen",assetVersionId:Bt,...e.shop,hasUserConsent:r,...vt(),analyticsAllowed:t.analyticsProcessingAllowed(),marketingAllowed:t.marketingAllowed(),saleOfDataAllowed:t.saleOfDataAllowed(),ccpaEnforced:!t.saleOfDataAllowed(),gdprEnforced:!(t.marketingAllowed()&&t.analyticsProcessingAllowed())}}function Ht(e,t){if(t===null)return;let r=H(e);return r?{...r,cartId:t.id}:void 0}var L={};function Gt(e){let t=H(e);t&&(W({eventName:I.PAGE_VIEW_2,payload:{...t,...L}}),L={})}function Ft(e){let t=H(e);if(t&&je({type:"product",products:e.products})){let r=re(e.products);L={pageType:U.product,resourceId:r[0].productGid},t={...t,...L,products:re(e.products)},W({eventName:I.PRODUCT_VIEW,payload:t})}}function Jt(e){let t=H(e);t&&(L={pageType:U.collection,resourceId:e.collection.id},t={...t,...L,collectionHandle:e.collection.handle,collectionId:e.collection.id},W({eventName:I.COLLECTION_VIEW,payload:t}))}function Kt(e){let t=H(e);t&&(L={pageType:U.search},t={...t,...L,searchString:e.searchTerm},W({eventName:I.SEARCH_VIEW,payload:t}))}function Yt(e){let{cart:t,currentLine:r}=e,n=Ht(e,t);!n||!(r!=null&&r.id)||Qt({matchedLine:r,eventPayload:n})}function Qt({matchedLine:e,eventPayload:t}){let r={id:e.merchandise.product.id,variantId:e.merchandise.id,title:e.merchandise.product.title,variantTitle:e.merchandise.title,vendor:e.merchandise.product.vendor,price:e.merchandise.price.amount,quantity:e.quantity,productType:e.merchandise.product.productType,sku:e.merchandise.sku};je({type:"cart",products:[r]})&&W({eventName:I.ADD_TO_CART,payload:{...t,products:re([r])}})}function x(e,t,r,n){if(e==="cart"){let o=`${r?"merchandise":"merchandise.product"}.${t}`;console.error(`[h2:error:ShopifyAnalytics] Can't set up cart analytics events because the \`cart.lines[].${o}\` value is missing from your GraphQL cart query. In your project, search for where \`fragment CartLine on CartLine\` is defined and make sure \`${o}\` is part of your cart query. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/lib/fragments.ts#L25-L56.`)}else{let o=`${n||t}`;console.error(`[h2:error:ShopifyAnalytics] Can't set up product view analytics events because the \`${o}\` is missing from your \`<Analytics.ProductView>\`. Make sure \`${o}\` is part of your products data prop. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/routes/products.%24handle.tsx#L159-L165.`)}}function je({type:e,products:t}){return!t||t.length===0?(x(e,"",!1,"data.products"),!1):(t.forEach(r=>{if(!r.id)return x(e,"id",!1),!1;if(!r.title)return x(e,"title",!1),!1;if(!r.price)return x(e,"price.amount",!0,"price"),!1;if(!r.vendor)return x(e,"vendor",!1),!1;if(!r.variantId)return x(e,"id",!0,"variantId"),!1;if(!r.variantTitle)return x(e,"title",!0,"variantTitle"),!1}),!0)}function re(e){return e.map(t=>{let r={productGid:t.id,variantGid:t.variantId,name:t.title,variantName:t.variantTitle,brand:t.vendor,price:t.price,quantity:t.quantity||1,category:t.productType};return t.sku&&(r.sku=t.sku),t.productType&&(r.category=t.productType),r})}function Ce(e){console.error(`[h2:error:CartAnalytics] Can't set up cart analytics events because the \`cart.${e}\` value is missing from your GraphQL cart query. In your project, search for where \`fragment CartApiQuery on Cart\` is defined and make sure \`${e}\` is part of your cart query. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/lib/fragments.ts#L59.`)}function Xt({cart:e,setCarts:t}){let{publish:r,shop:n,customData:o,canTrack:i,cart:a,prevCart:s}=Z(),c=l.useRef(null);return l.useEffect(()=>{if(e)return Promise.resolve(e).then(u=>{if(u&&u.lines){if(!u.id){Ce("id");return}if(!u.updatedAt){Ce("updatedAt");return}}t(({cart:d,prevCart:f})=>(u==null?void 0:u.updatedAt)!==(d==null?void 0:d.updatedAt)?{cart:u,prevCart:d}:{cart:d,prevCart:f})}),()=>{}},[t,e]),l.useEffect(()=>{if(!a||!(a!=null&&a.updatedAt)||(a==null?void 0:a.updatedAt)===(s==null?void 0:s.updatedAt))return;let u;try{u=JSON.parse(localStorage.getItem("cartLastUpdatedAt")||"")}catch{u=null}if(a.id===(u==null?void 0:u.id)&&a.updatedAt===(u==null?void 0:u.updatedAt))return;let d={eventTimestamp:Date.now(),cart:a,prevCart:s,shop:n,customData:o};if(a.updatedAt===c.current)return;c.current=a.updatedAt,r("cart_updated",d),localStorage.setItem("cartLastUpdatedAt",JSON.stringify({id:a.id,updatedAt:a.updatedAt}));let f=s!=null&&s.lines?j(s==null?void 0:s.lines):[],p=a.lines?j(a.lines):[];f==null||f.forEach(g=>{let y=p.filter(h=>g.id===h.id);if((y==null?void 0:y.length)===1){let h=y[0];g.quantity<h.quantity?r("product_added_to_cart",{...d,prevLine:g,currentLine:h}):g.quantity>h.quantity&&r("product_removed_from_cart",{...d,prevLine:g,currentLine:h})}else r("product_removed_from_cart",{...d,prevLine:g})}),p==null||p.forEach(g=>{let y=f.filter(h=>g.id===h.id);(!y||y.length===0)&&r("product_added_to_cart",{...d,currentLine:g})})},[a,s,r,n,o,i]),null}var zt="https://cdn.shopify.com/shopifycloud/perf-kit/shopify-perf-kit-spa.min.js";function Zt({shop:e}){let t=l.useRef(!1),{subscribe:r,register:n}=Z(),{ready:o}=n("Internal_Shopify_Perf_Kit"),i=ie(zt,{attributes:{id:"perfkit","data-application":"hydrogen","data-shop-id":T(e.shopId).id.toString(),"data-storefront-id":e.hydrogenSubchannelId,"data-monorail-region":"global","data-spa-mode":"true","data-resource-timing-sampling-rate":"100"}});return l.useEffect(()=>{i!=="done"||t.current||(t.current=!0,r(b.PAGE_VIEWED,()=>{var a;(a=window.PerfKit)==null||a.navigate()}),r(b.PRODUCT_VIEWED,()=>{var a;(a=window.PerfKit)==null||a.setPageType("product")}),r(b.COLLECTION_VIEWED,()=>{var a;(a=window.PerfKit)==null||a.setPageType("collection")}),r(b.SEARCH_VIEWED,()=>{var a;(a=window.PerfKit)==null||a.setPageType("search")}),r(b.CART_VIEWED,()=>{var a;(a=window.PerfKit)==null||a.setPageType("cart")}),o())},[r,o,i]),null}var Te=new Set,er=e=>{Te.has(e)||(console.warn(e),Te.add(e))},Ie=new Set,Ae=e=>{Ie.has(e)||(console.error(new Error(e)),Ie.add(e))},tr={canTrack:()=>!1,cart:null,customData:{},prevCart:null,publish:()=>{},shop:null,subscribe:()=>{},register:()=>({ready:()=>{}}),customerPrivacy:null,privacyBanner:null},Be=l.createContext(tr),K=new Map,B={};function Me(){return Object.values(B).every(Boolean)}function ke(e,t){var r;K.has(e)||K.set(e,new Map),(r=K.get(e))==null||r.set(t.toString(),t)}var Y=new Map;function Se(e,t){if(!Me()){Y.set(e,t);return}We(e,t)}function We(e,t){(K.get(e)??new Map).forEach((r,n)=>{try{r(t)}catch(o){typeof o=="object"&&o instanceof Error?console.error("Analytics publish error",o.message,n,o.stack):console.error("Analytics publish error",o,n)}})}function be(e){return B.hasOwnProperty(e)||(B[e]=!1),{ready:()=>{B[e]=!0,Me()&&Y.size>0&&(Y.forEach((t,r)=>{We(r,t)}),Y.clear())}}}function De(){try{return window.Shopify.customerPrivacy.analyticsProcessingAllowed()}catch{}return!1}function Oe(e,t){return`[h2:error:Analytics.Provider] - ${e} is required. Make sure ${t} is defined in your environment variables. See https://h2o.fyi/analytics/consent to learn how to setup environment variables in the Shopify admin.`}function rr({canTrack:e,cart:t,children:r,consent:n,customData:o={},shop:i=null,cookieDomain:a}){var v;let{shop:s}=nr(i),[c,u]=l.useState(!!e),[d,f]=l.useState(!1),[p,g]=l.useState({cart:null,prevCart:null}),[y,h]=l.useState(e?()=>e:()=>De);if(s)if(/\/68817551382$/.test(s.shopId))er("[h2:error:Analytics.Provider] - Mock shop is used. Analytics will not work properly.");else{if(!n.checkoutDomain){let E=Oe("consent.checkoutDomain","PUBLIC_CHECKOUT_DOMAIN");Ae(E)}if(!n.storefrontAccessToken){let E=Oe("consent.storefrontAccessToken","PUBLIC_STOREFRONT_API_TOKEN");Ae(E)}n!=null&&n.country||(n.country="US"),n!=null&&n.language||(n.language="EN"),n.withPrivacyBanner===void 0&&(n.withPrivacyBanner=!1)}let m=l.useMemo(()=>({canTrack:y,...p,customData:o,publish:y()?Se:()=>{},shop:s,subscribe:ke,register:be,customerPrivacy:q(),privacyBanner:X()}),[c,y,p,(v=p.cart)==null?void 0:v.updatedAt,p.prevCart,Se,ke,o,s,be,JSON.stringify(B),q,X]);return P.jsxs(Be.Provider,{value:m,children:[r,!!s&&P.jsx(kt,{}),!!s&&!!t&&P.jsx(Xt,{cart:t,setCarts:g}),!!s&&P.jsx(Wt,{consent:n,onReady:()=>{u(!0),h(e?()=>e:()=>De),f(!0)},domain:a}),!!s&&d&&P.jsx(Zt,{shop:s})]})}function Z(){let e=l.useContext(Be);if(!e)throw new Error("[h2:error:useAnalytics] 'useAnalytics()' must be a descendent of <AnalyticsProvider/>");return e}function nr(e){let[t,r]=l.useState(null);return l.useEffect(()=>(Promise.resolve(e).then(r),()=>{}),[r,e]),{shop:t}}var dr={CollectionView:bt,ProductView:St,Provider:rr,SearchView:Dt},He="cartFormInput";function N({children:e,action:t,inputs:r,route:n,fetcherKey:o}){let i=Ke({key:o});return P.jsxs(i.Form,{action:n||"",method:"post",children:[(t||r)&&P.jsx("input",{type:"hidden",name:He,value:JSON.stringify({action:t,inputs:r})}),typeof e=="function"?e(i):e]})}N.INPUT_NAME=He;N.ACTIONS={AttributesUpdateInput:"AttributesUpdateInput",BuyerIdentityUpdate:"BuyerIdentityUpdate",Create:"Create",DiscountCodesUpdate:"DiscountCodesUpdate",GiftCardCodesUpdate:"GiftCardCodesUpdate",GiftCardCodesRemove:"GiftCardCodesRemove",LinesAdd:"LinesAdd",LinesRemove:"LinesRemove",LinesUpdate:"LinesUpdate",NoteUpdate:"NoteUpdate",SelectedDeliveryOptionsUpdate:"SelectedDeliveryOptionsUpdate",MetafieldsSet:"MetafieldsSet",MetafieldDelete:"MetafieldDelete",DeliveryAddressesAdd:"DeliveryAddressesAdd",DeliveryAddressesUpdate:"DeliveryAddressesUpdate",DeliveryAddressesRemove:"DeliveryAddressesRemove"};function or(e){let t={};for(let a of e.entries()){let s=a[0],c=e.getAll(s);t[s]=c.length>1?c:a[1],t[s]==="on"?t[s]=!0:t[s]==="off"&&(t[s]=!1)}let{cartFormInput:r,...n}=t,{action:o,inputs:i}=r?JSON.parse(String(r)):{};return{action:o,inputs:{...i,...n}}}N.getFormInput=or;var Ge="__h_pending_";function ar(e){return Ge+e}function Re(e){return e.startsWith(Ge)}function fr(e){let t=Je();if(!t||!t.length)return e;let r=e!=null&&e.lines?structuredClone(e):{lines:{nodes:[]}},n=r.lines.nodes,o=!1;for(let{formData:i}of t){if(!i)continue;let a=N.getFormInput(i);if(a.action===N.ACTIONS.LinesAdd)for(let s of a.inputs.lines){if(!s.selectedVariant){console.error("[h2:error:useOptimisticCart] No selected variant was passed in the cart action. Make sure to pass the selected variant if you want to use an optimistic cart");continue}let c=n.find(u=>{var d;return u.merchandise.id===((d=s.selectedVariant)==null?void 0:d.id)});o=!0,c?(c.quantity=(c.quantity||1)+(s.quantity||1),c.isOptimistic=!0):n.unshift({id:ar(s.selectedVariant.id),merchandise:s.selectedVariant,isOptimistic:!0,quantity:s.quantity||1})}else if(a.action===N.ACTIONS.LinesRemove)for(let s of a.inputs.lineIds){let c=n.findIndex(u=>u.id===s);if(c!==-1){if(Re(n[c].id)){console.error("[h2:error:useOptimisticCart] Tried to remove an optimistic line that has not been added to the cart yet");continue}n.splice(c,1),o=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to remove line '${s}' but it doesn't exist in the cart`)}else if(a.action===N.ACTIONS.LinesUpdate)for(let s of a.inputs.lines){let c=n.findIndex(u=>s.id===u.id);if(c>-1){if(Re(n[c].id)){console.error("[h2:error:useOptimisticCart] Tried to update an optimistic line that has not been added to the cart yet");continue}n[c].quantity=s.quantity,n[c].quantity===0&&n.splice(c,1),o=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to update line '${s.id}' but it doesn't exist in the cart`)}}return o&&(r.isOptimistic=o),r.totalQuantity=n.reduce((i,a)=>i+a.quantity,0),r}var Fe=l.createContext(void 0),pr=Fe.Provider,ir=()=>l.useContext(Fe);l.forwardRef((e,t)=>{let{waitForHydration:r,src:n,...o}=e,i=ir();return r?P.jsx(sr,{src:n,options:o}):P.jsx("script",{suppressHydrationWarning:!0,...o,src:n,nonce:i,ref:t})});function sr({src:e,options:t}){if(!e)throw new Error("`waitForHydration` with the Script component requires a `src` prop");return ie(e,{attributes:t}),null}function hr({connection:e,children:t=()=>(console.warn("<Pagination> requires children to work properly"),null),namespace:r=""}){let[n,o]=l.useState(!1),i=ne(),a=oe();Le(),l.useEffect(()=>{i.state==="idle"&&o(!1)},[i.state]);let{endCursor:s,hasNextPage:c,hasPreviousPage:u,nextPageUrl:d,nodes:f,previousPageUrl:p,startCursor:g}=cr(e,r),y=l.useMemo(()=>{var v;return{...a.state,pagination:{...((v=a.state)==null?void 0:v.pagination)||{},[r]:{pageInfo:{endCursor:s,hasPreviousPage:u,hasNextPage:c,startCursor:g},nodes:f}}}},[s,c,u,g,f,r,a.state]),h=l.useMemo(()=>l.forwardRef(function(v,E){return c?l.createElement(ue,{preventScrollReset:!0,...v,to:d,state:y,replace:!0,ref:E,onClick:()=>o(!0)}):null}),[c,d,y]),m=l.useMemo(()=>l.forwardRef(function(v,E){return u?l.createElement(ue,{preventScrollReset:!0,...v,to:p,state:y,replace:!0,ref:E,onClick:()=>o(!0)}):null}),[u,p,y]);return t({state:y,hasNextPage:c,hasPreviousPage:u,isLoading:n,nextPageUrl:d,nodes:f,previousPageUrl:p,NextLink:h,PreviousLink:m})}function J(e,t){let r=new URLSearchParams(e);return Object.keys((t==null?void 0:t.pagination)||{}).forEach(n=>{let o=n===""?"":`${n}_`,i=`${o}cursor`,a=`${o}direction`;r.delete(i),r.delete(a)}),r.toString()}function $(e){throw new Error(`The Pagination component requires ${"`"+e+"`"} to be a part of your query. See the guide on how to setup your query to include ${"`"+e+"`"}: https://shopify.dev/docs/custom-storefronts/hydrogen/data-fetching/pagination#setup-the-paginated-query`)}function cr(e,t=""){e.pageInfo||$("pageInfo"),typeof e.pageInfo.startCursor>"u"&&$("pageInfo.startCursor"),typeof e.pageInfo.endCursor>"u"&&$("pageInfo.endCursor"),typeof e.pageInfo.hasNextPage>"u"&&$("pageInfo.hasNextPage"),typeof e.pageInfo.hasPreviousPage>"u"&&$("pageInfo.hasPreviousPage");let r=ne(),n=Le(),{state:o,search:i,pathname:a}=oe(),s=t?`${t}_cursor`:"cursor",c=t?`${t}_direction`:"direction",u=new URLSearchParams(i).get(c)==="previous",d=l.useMemo(()=>{var h,m,v;return!((h=globalThis==null?void 0:globalThis.window)!=null&&h.__hydrogenHydrated)||!((v=(m=o==null?void 0:o.pagination)==null?void 0:m[t])!=null&&v.nodes)?j(e):u?[...j(e),...o.pagination[t].nodes||[]]:[...o.pagination[t].nodes||[],...j(e)]},[o,e,t]),f=l.useMemo(()=>{var k,C,S,se,ce;let h=(k=globalThis==null?void 0:globalThis.window)==null?void 0:k.__hydrogenHydrated,m=(S=(C=o==null?void 0:o.pagination)==null?void 0:C[t])==null?void 0:S.pageInfo,v=!h||(m==null?void 0:m.startCursor)===void 0?e.pageInfo.startCursor:m.startCursor,E=!h||(m==null?void 0:m.endCursor)===void 0?e.pageInfo.endCursor:m.endCursor,w=!h||(m==null?void 0:m.hasPreviousPage)===void 0?e.pageInfo.hasPreviousPage:m.hasPreviousPage,_=!h||(m==null?void 0:m.hasNextPage)===void 0?e.pageInfo.hasNextPage:m.hasNextPage;return(ce=(se=o==null?void 0:o.pagination)==null?void 0:se[t])!=null&&ce.nodes&&(u?(v=e.pageInfo.startCursor,w=e.pageInfo.hasPreviousPage):(E=e.pageInfo.endCursor,_=e.pageInfo.hasNextPage)),{startCursor:v,endCursor:E,hasPreviousPage:w,hasNextPage:_}},[u,o,t,e.pageInfo.hasNextPage,e.pageInfo.hasPreviousPage,e.pageInfo.startCursor,e.pageInfo.endCursor]),p=l.useRef({params:J(i,o),pathname:a});l.useEffect(()=>{window.__hydrogenHydrated=!0},[]),l.useEffect(()=>{let h=J(i,o),m=p.current.params;(a!==p.current.pathname||h!==m)&&!(r.state==="idle"&&!r.location)&&(p.current={pathname:a,params:J(i,o)},n(`${a}?${J(i,o)}`,{replace:!0,preventScrollReset:!0,state:{nodes:void 0,pageInfo:void 0}}))},[a,i,o]);let g=l.useMemo(()=>{let h=new URLSearchParams(i);return h.set(c,"previous"),f.startCursor&&h.set(s,f.startCursor),`?${h.toString()}`},[i,f.startCursor]),y=l.useMemo(()=>{let h=new URLSearchParams(i);return h.set(c,"next"),f.endCursor&&h.set(s,f.endCursor),`?${h.toString()}`},[i,f.endCursor]);return{...f,previousPageUrl:g,nextPageUrl:y,nodes:d}}function yr(e,t){let r=ne(),[n,o]=l.useState([]);if(l.useEffect(()=>{Promise.resolve(t).then(i=>{var a,s;i&&o(i instanceof Array?i:((s=(a=i.product)==null?void 0:a.variants)==null?void 0:s.nodes)||[])}).catch(i=>{reportError(new Error("[h2:error:useOptimisticVariant] An error occurred while resolving the variants for the optimistic product hook.",{cause:i}))})},[JSON.stringify(t)]),r.state==="loading"){let i=new URLSearchParams(r.location.search),a=!1,s=n.find(c=>c.selectedOptions?c.selectedOptions.every(u=>i.get(u.name)===u.value):(a||(a=!0,reportError(new Error("[h2:error:useOptimisticVariant] The optimistic product hook requires your product query to include variants with the selectedOptions field."))),!1));if(s)return{...s,isOptimistic:!0}}return e}l.lazy(()=>ze(()=>import("./log-seo-tags-TY72EQWZ-DCHH-_Gl.js"),[]));export{pr as E,N as J,Z as Y,dr as _,ir as a,j as f,hr as i,fr as v,yr as y};
