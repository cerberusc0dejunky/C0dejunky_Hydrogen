import{r as u,w as N,u as y}from"./chunk-TMI4QPZX-voV0X6j3.js";import{j as e}from"./jsx-runtime-59Xd5K8P.js";import{_ as w}from"./index-Ck7_0ybI.js";import{I as g}from"./Image-dewHdXBc.js";import{M as j}from"./Money-BwnrHHOZ.js";import{A as k}from"./AddToCartButton-CSobI2M-.js";import{u as C}from"./Aside-C1PG5IR-.js";function F({product:l,loading:s,onClick:c}){const n=l.featuredImage,h=o=>{o.preventDefault(),c()};return e.jsxs("article",{className:"product-item product-item--clickable",onClick:h,role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),c())},"aria-label":`View ${l.title}`,children:[n&&e.jsx("div",{className:"product-item__image-wrapper",children:e.jsx(g,{alt:n.altText||l.title,aspectRatio:"1/1",data:n,loading:s,sizes:"(min-width: 45em) 400px, 100vw"})}),e.jsxs("div",{className:"product-item__details",children:[e.jsx("h4",{className:"product-item__title",children:l.title}),e.jsx("div",{className:"product-item__price",children:e.jsx(j,{data:l.priceRange.minVariantPrice})})]}),e.jsx("div",{className:"product-item__overlay",children:e.jsx("span",{className:"product-item__quick-view",children:"Quick View"})})]})}function P({products:l,onProductClick:s}){const[c,n]=u.useState(null),[h,o]=u.useState("all"),[d,p]=u.useState("all"),[b,v]=u.useState("featured"),x=u.useMemo(()=>{const t={};return l.forEach(i=>{const a=i.productType||"Other";t[a]||(t[a]=[]),t[a].push(i)}),t},[l]),_=Object.keys(x).sort();!c&&_.length>0&&n(_[0]);const f=u.useMemo(()=>c?x[c]||[]:[],[c,x]),r=u.useMemo(()=>{let t=[...f];switch(h!=="all"&&(t=t.filter(i=>{const a=parseFloat(i.priceRange.minVariantPrice.amount);switch(h){case"under-25":return a<25;case"25-50":return a>=25&&a<50;case"50-100":return a>=50&&a<100;case"over-100":return a>=100;default:return!0}})),d==="in-stock"&&(t=t.filter(i=>i.availableForSale!==!1)),b){case"price-low-high":t.sort((i,a)=>parseFloat(i.priceRange.minVariantPrice.amount)-parseFloat(a.priceRange.minVariantPrice.amount));break;case"price-high-low":t.sort((i,a)=>parseFloat(a.priceRange.minVariantPrice.amount)-parseFloat(i.priceRange.minVariantPrice.amount));break;case"title-a-z":t.sort((i,a)=>i.title.localeCompare(a.title));break;case"title-z-a":t.sort((i,a)=>a.title.localeCompare(i.title));break}return t},[f,h,d,b]),m=t=>{n(t),o("all"),p("all"),v("featured")};return _.length===0?e.jsx("div",{className:"tabbed-collection-empty",children:"No products found"}):e.jsxs("div",{className:"tabbed-collection",children:[e.jsx("div",{className:"tabbed-collection__tabs",children:e.jsx("div",{className:"tabbed-collection__tabs-wrapper",children:_.map(t=>e.jsxs("button",{className:`tabbed-collection__tab ${c===t?"tabbed-collection__tab--active":""}`,onClick:()=>m(t),children:[t,e.jsxs("span",{className:"tabbed-collection__tab-count",children:["(",x[t].length,")"]})]},t))})}),e.jsxs("div",{className:"tabbed-collection__filters",children:[e.jsxs("div",{className:"tabbed-collection__filter-group",children:[e.jsx("label",{htmlFor:"sort-by",className:"tabbed-collection__filter-label",children:"Sort By:"}),e.jsxs("select",{id:"sort-by",value:b,onChange:t=>v(t.target.value),className:"tabbed-collection__filter-select",children:[e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"price-low-high",children:"Price: Low to High"}),e.jsx("option",{value:"price-high-low",children:"Price: High to Low"}),e.jsx("option",{value:"title-a-z",children:"Name: A-Z"}),e.jsx("option",{value:"title-z-a",children:"Name: Z-A"})]})]}),e.jsxs("div",{className:"tabbed-collection__filter-group",children:[e.jsx("label",{htmlFor:"price-filter",className:"tabbed-collection__filter-label",children:"Price:"}),e.jsxs("select",{id:"price-filter",value:h,onChange:t=>o(t.target.value),className:"tabbed-collection__filter-select",children:[e.jsx("option",{value:"all",children:"All Prices"}),e.jsx("option",{value:"under-25",children:"Under $25"}),e.jsx("option",{value:"25-50",children:"$25 - $50"}),e.jsx("option",{value:"50-100",children:"$50 - $100"}),e.jsx("option",{value:"over-100",children:"Over $100"})]})]}),e.jsxs("div",{className:"tabbed-collection__filter-group",children:[e.jsx("label",{htmlFor:"availability-filter",className:"tabbed-collection__filter-label",children:"Availability:"}),e.jsxs("select",{id:"availability-filter",value:d,onChange:t=>p(t.target.value),className:"tabbed-collection__filter-select",children:[e.jsx("option",{value:"all",children:"All Products"}),e.jsx("option",{value:"in-stock",children:"In Stock Only"})]})]}),e.jsxs("div",{className:"tabbed-collection__results-count",children:[r.length," ",r.length===1?"product":"products"]})]}),e.jsx("div",{className:"tabbed-collection__content",children:r.length>0?e.jsx("div",{className:"products-grid",children:r.map((t,i)=>e.jsx(F,{product:t,loading:i<8?"eager":"lazy",onClick:()=>s==null?void 0:s(t)},t.id))}):e.jsxs("div",{className:"tabbed-collection__no-results",children:[e.jsx("p",{children:"No products match your filters."}),e.jsx("button",{onClick:()=>{o("all"),p("all")},className:"button-secondary",children:"Clear Filters"})]})})]})}function S({product:l,isOpen:s,onClose:c}){var v,x,_,f;const n=u.useRef(null),{open:h}=C();u.useEffect(()=>{const r=m=>{m.key==="Escape"&&s&&c()};return s&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""}},[s,c]);const o=r=>{r.target===r.currentTarget&&c()};if(u.useEffect(()=>{if(s&&n.current){const r=n.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),m=r[0],t=r[r.length-1],i=a=>{a.key==="Tab"&&(a.shiftKey?document.activeElement===m&&(a.preventDefault(),t==null||t.focus()):document.activeElement===t&&(a.preventDefault(),m==null||m.focus()))};return document.addEventListener("keydown",i),m==null||m.focus(),()=>{document.removeEventListener("keydown",i)}}},[s,l]),!s||!l)return null;const d=(x=(v=l.variants)==null?void 0:v.nodes)==null?void 0:x[0],p=l.featuredImage,b=async()=>{setTimeout(()=>{h()},300)};return e.jsx("div",{className:"product-modal-backdrop",onClick:o,"aria-modal":"true",role:"dialog","aria-labelledby":"product-modal-title",children:e.jsxs("div",{className:"product-modal",ref:n,children:[e.jsx("button",{className:"product-modal__close",onClick:c,"aria-label":"Close product details",children:"âœ•"}),e.jsxs("div",{className:"product-modal__content",children:[e.jsx("div",{className:"product-modal__image-section",children:p&&e.jsx(g,{alt:p.altText||l.title,aspectRatio:"1/1",data:p,loading:"eager",sizes:"(min-width: 768px) 50vw, 100vw",className:"product-modal__image"})}),e.jsxs("div",{className:"product-modal__details",children:[e.jsx("h2",{id:"product-modal-title",className:"product-modal__title",children:l.title}),l.vendor&&e.jsx("p",{className:"product-modal__vendor",children:l.vendor}),e.jsx("div",{className:"product-modal__price",children:d?e.jsx(j,{data:d.price}):e.jsx(j,{data:l.priceRange.minVariantPrice})}),l.description&&e.jsxs("div",{className:"product-modal__description",children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{children:l.description})]}),((f=(_=l.variants)==null?void 0:_.nodes)==null?void 0:f.length)>1&&e.jsxs("div",{className:"product-modal__variants",children:[e.jsx("h3",{children:"Options"}),e.jsxs("p",{className:"product-modal__variants-note",children:[l.variants.nodes.length," variants available"]})]}),e.jsxs("div",{className:"product-modal__actions",children:[d?e.jsx(k,{disabled:!d.availableForSale,onClick:b,lines:[{merchandiseId:d.id,quantity:1}],className:"product-modal__add-to-cart",children:d.availableForSale?"Add to Cart":"Sold Out"}):e.jsx("button",{className:"product-modal__view-full button-secondary",onClick:c,children:"View Full Details"}),e.jsx("a",{href:`/products/${l.handle}`,className:"product-modal__full-details button-secondary",target:"_blank",rel:"noopener noreferrer",children:"See Full Details"})]})]})]})]})})}const D=({data:l})=>[{title:`Hydrogen | ${(l==null?void 0:l.collection.title)??""} Collection`}],I=N(function(){const{collection:s}=y(),[c,n]=u.useState(null),[h,o]=u.useState(!1),d=v=>{n(v),o(!0)},p=()=>{o(!1),setTimeout(()=>n(null),300)},b=s.products.nodes||[];return e.jsxs("div",{className:"collection",children:[e.jsx("h1",{children:s.title}),e.jsx("p",{className:"collection-description",children:s.description}),e.jsx(P,{products:b,onProductClick:d}),e.jsx(S,{product:c,isOpen:h,onClose:p}),e.jsx(w.CollectionView,{data:{collection:{id:s.id,handle:s.handle}}})]})});export{I as default,D as meta};
